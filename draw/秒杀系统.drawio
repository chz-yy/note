<mxfile host="Electron" modified="2024-12-06T07:44:48.541Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/24.2.5 Chrome/120.0.6099.109 Electron/28.1.0 Safari/537.36" etag="d_W6smNo_Uk-FGqZjNd4" version="24.2.5" type="device">
  <diagram name="第 1 页" id="9KWpyWcvt7qffTFE2Re1">
    <mxGraphModel dx="1668" dy="974" grid="1" gridSize="11" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="uQ1eQY6LB-sIsB9p33KR-3" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="40" y="100" width="30" height="40" as="geometry" />
        </mxCell>
        <mxCell id="uQ1eQY6LB-sIsB9p33KR-4" value="秒杀服务" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="130" y="110" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="uQ1eQY6LB-sIsB9p33KR-5" value="登录拦截器" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="110" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-1" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="uQ1eQY6LB-sIsB9p33KR-4" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="66" y="125" as="sourcePoint" />
            <mxPoint x="303" y="165" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-3" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="uQ1eQY6LB-sIsB9p33KR-4" target="uQ1eQY6LB-sIsB9p33KR-5" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="253" y="215" as="sourcePoint" />
            <mxPoint x="303" y="165" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="q_z8vGVEV94Sz29EOXOW-4" target="q_z8vGVEV94Sz29EOXOW-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-4" value="查询商品信息" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="374" y="105.25" width="99" height="39.5" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-5" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="uQ1eQY6LB-sIsB9p33KR-5" target="q_z8vGVEV94Sz29EOXOW-4" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="253" y="215" as="sourcePoint" />
            <mxPoint x="303" y="165" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-6" target="q_z8vGVEV94Sz29EOXOW-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-6" value="判断是否有库存" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="528" y="104" width="99" height="42" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="q_z8vGVEV94Sz29EOXOW-8" target="q_z8vGVEV94Sz29EOXOW-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-8" value="判断是否在秒杀时间" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="682" y="104" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.609;exitY=0.992;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="924" y="154" as="sourcePoint" />
            <mxPoint x="925" y="209" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-10" value="判断是否买过" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="858" y="103.5" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-13" target="q_z8vGVEV94Sz29EOXOW-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-13" value="下单" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="869" y="211.5" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-18" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="q_z8vGVEV94Sz29EOXOW-15" target="q_z8vGVEV94Sz29EOXOW-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-15" value="扣减库存" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="869" y="297" width="112" height="48" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-17" value="添加订单信息" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="868" y="396" width="112" height="48" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-22" value="原始架构" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="44" y="11" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-23" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="22" y="1178" width="30" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-24" value="秒杀服务" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="112" y="1188" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-25" value="登录拦截器" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="222" y="1188" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-26" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="q_z8vGVEV94Sz29EOXOW-24" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="48" y="1203" as="sourcePoint" />
            <mxPoint x="285" y="1243" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-27" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-24" target="q_z8vGVEV94Sz29EOXOW-25" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="235" y="1293" as="sourcePoint" />
            <mxPoint x="285" y="1243" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="q_z8vGVEV94Sz29EOXOW-29" target="q_z8vGVEV94Sz29EOXOW-32" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-29" value="查询商品信息" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="356" y="1183.25" width="99" height="39.5" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-30" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-25" target="q_z8vGVEV94Sz29EOXOW-29" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="235" y="1293" as="sourcePoint" />
            <mxPoint x="285" y="1243" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-32" target="q_z8vGVEV94Sz29EOXOW-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-32" value="判断是否有库存" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="510" y="1182" width="99" height="42" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="q_z8vGVEV94Sz29EOXOW-34" target="q_z8vGVEV94Sz29EOXOW-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-34" value="判断是否在秒杀时间" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="664" y="1182" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.609;exitY=0.992;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-36" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="906" y="1232" as="sourcePoint" />
            <mxPoint x="907" y="1287" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-36" value="判断是否买过" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="840" y="1181.5" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-69" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-38" target="q_z8vGVEV94Sz29EOXOW-68" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-38" value="下单" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="851" y="1289.5" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-39" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="q_z8vGVEV94Sz29EOXOW-40" target="q_z8vGVEV94Sz29EOXOW-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-40" value="扣减库存" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="850.5" y="1463" width="112" height="48" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-41" value="添加订单信息" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="851" y="1562" width="112" height="48" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-44" value="并发访问会超卖" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="275" y="11" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-47" value="jvm锁方式" style="text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;" parent="1" vertex="1">
          <mxGeometry x="54" y="521" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-48" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="11" y="628" width="30" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-49" value="秒杀服务" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="101" y="638" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-50" value="登录拦截器" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="211" y="638" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-51" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="q_z8vGVEV94Sz29EOXOW-49" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="37" y="653" as="sourcePoint" />
            <mxPoint x="274" y="693" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-52" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-49" target="q_z8vGVEV94Sz29EOXOW-50" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="224" y="743" as="sourcePoint" />
            <mxPoint x="274" y="693" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="q_z8vGVEV94Sz29EOXOW-54" target="q_z8vGVEV94Sz29EOXOW-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-54" value="查询商品信息" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="345" y="633.25" width="99" height="39.5" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-55" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-50" target="q_z8vGVEV94Sz29EOXOW-54" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="224" y="743" as="sourcePoint" />
            <mxPoint x="274" y="693" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-57" target="q_z8vGVEV94Sz29EOXOW-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-57" value="判断是否有库存" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="499" y="632" width="99" height="42" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="q_z8vGVEV94Sz29EOXOW-59" target="q_z8vGVEV94Sz29EOXOW-61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-59" value="判断是否在秒杀时间" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="653" y="632" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-60" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.609;exitY=0.992;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-61" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="895" y="682" as="sourcePoint" />
            <mxPoint x="896" y="737" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-61" value="判断是否买过" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="829" y="631.5" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-63" target="q_z8vGVEV94Sz29EOXOW-65" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-63" value="下单" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="840" y="739.5" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-64" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="q_z8vGVEV94Sz29EOXOW-65" target="q_z8vGVEV94Sz29EOXOW-66" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-65" value="扣减库存" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="840" y="825" width="112" height="48" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-66" value="添加订单信息" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="839" y="924" width="112" height="48" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-67" value="全过程锁，qps小" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="325" y="605" width="682" height="407" as="geometry" />
        </mxCell>
        <mxCell id="7bmGx1VuE1o9UgQvX1br-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-68" target="q_z8vGVEV94Sz29EOXOW-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-68" value="查询库存" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="841.75" y="1375" width="129.5" height="44" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-71" value="扣库存前，再次查库存，同时对这两步操作加锁，缩小锁的范围，同时保证了不会超卖" style="shape=note;size=20;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1045" y="1353" width="143" height="110" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-72" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="33" y="1738" width="30" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-73" value="秒杀服务" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="123" y="1748" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-74" value="登录拦截器" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="233" y="1748" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-75" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="q_z8vGVEV94Sz29EOXOW-73" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="59" y="1763" as="sourcePoint" />
            <mxPoint x="296" y="1803" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-76" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-73" target="q_z8vGVEV94Sz29EOXOW-74" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="246" y="1853" as="sourcePoint" />
            <mxPoint x="296" y="1803" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-77" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="q_z8vGVEV94Sz29EOXOW-78" target="q_z8vGVEV94Sz29EOXOW-81" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-78" value="查询商品信息" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="367" y="1743.25" width="99" height="39.5" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-79" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-74" target="q_z8vGVEV94Sz29EOXOW-78" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="246" y="1853" as="sourcePoint" />
            <mxPoint x="296" y="1803" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-80" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-81" target="q_z8vGVEV94Sz29EOXOW-83" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-81" value="判断是否有库存" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="521" y="1742" width="99" height="42" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-82" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="q_z8vGVEV94Sz29EOXOW-83" target="q_z8vGVEV94Sz29EOXOW-85" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-83" value="判断是否在秒杀时间" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="675" y="1742" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-84" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.609;exitY=0.992;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-85" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="917" y="1792" as="sourcePoint" />
            <mxPoint x="918" y="1847" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-85" value="判断是否买过" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="851" y="1741.5" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-86" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-87" target="q_z8vGVEV94Sz29EOXOW-93" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-87" value="下单" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="862" y="1849.5" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-88" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="q_z8vGVEV94Sz29EOXOW-89" target="q_z8vGVEV94Sz29EOXOW-90" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-89" value="扣减库存" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="861.5" y="2023" width="112" height="48" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-90" value="添加订单信息" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="860.5" y="2122" width="112" height="48" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-91" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="816.37" y="1914" width="217.25" height="176" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-92" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="q_z8vGVEV94Sz29EOXOW-93" target="q_z8vGVEV94Sz29EOXOW-89" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-93" value="查询库存" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="852.75" y="1935" width="129.5" height="44" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-94" value="锁这两步" style="shape=note;size=20;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1056" y="1935" width="143" height="110" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-96" value="分布式锁" style="text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;" parent="1" vertex="1">
          <mxGeometry x="30" y="1610" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-97" value="&lt;ul&gt;&lt;li&gt;使用setnx实现自旋锁&lt;/li&gt;&lt;li&gt;查库存，扣库存&lt;/li&gt;&lt;li&gt;释放锁&lt;/li&gt;&lt;li&gt;使用redis的setnx,可以保证分布式，多jvm实例使用同一个锁&lt;/li&gt;&lt;li&gt;需要设置过期时间，保证在服务挂掉后，锁被释放&lt;/li&gt;&lt;li&gt;需要设置value为线程唯一id,保证一个线程的锁，只能被自己释放&lt;/li&gt;&lt;/ul&gt;" style="text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;" parent="1" vertex="1">
          <mxGeometry x="193" y="1617" width="434" height="110" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-98" value="&lt;ul&gt;&lt;li&gt;单体架构有效，分布式多实例部署，无法保证互斥&lt;/li&gt;&lt;/ul&gt;" style="text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;" parent="1" vertex="1">
          <mxGeometry x="233" y="495" width="229" height="90" as="geometry" />
        </mxCell>
        <mxCell id="q_z8vGVEV94Sz29EOXOW-43" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="804.38" y="1353" width="217.25" height="176" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-1" target="oDkrbYAr0qEppYFbUsjB-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-1" value="线程1" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="2322" width="125" height="60" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-2" target="oDkrbYAr0qEppYFbUsjB-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-2" value="线程2" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="51" y="2465" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-3" target="oDkrbYAr0qEppYFbUsjB-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-3" target="oDkrbYAr0qEppYFbUsjB-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="314" y="2318" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-13" value="成功" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="oDkrbYAr0qEppYFbUsjB-12" vertex="1" connectable="0">
          <mxGeometry x="-0.1316" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-3" value="锁" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="274" y="2377" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-6" target="oDkrbYAr0qEppYFbUsjB-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-6" value="获取失败" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="381" y="2455" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-9" target="oDkrbYAr0qEppYFbUsjB-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-9" value="查库存" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="407" y="2288" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-10" value="扣库存" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="562" y="2288" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.718;entryY=0.142;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-10" target="oDkrbYAr0qEppYFbUsjB-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="622" y="2388" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-17" value="释放" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="oDkrbYAr0qEppYFbUsjB-15" vertex="1" connectable="0">
          <mxGeometry x="-0.0452" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-18" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;锁续期&lt;/h1&gt;&lt;p&gt;如果业务执行时间超过锁过期时间，需要延长锁时间，通过watchdog定时延长，在释放锁时释放watchdog&lt;/p&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="58" y="2178" width="244" height="120" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-19" value="watchdog&lt;div&gt;定时延长锁过期时间&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="462" y="2178" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-20" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="39" y="2651" width="30" height="40" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-21" value="秒杀服务" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="129" y="2661" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-68" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-22" target="oDkrbYAr0qEppYFbUsjB-67" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-22" value="登录拦截器" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="239" y="2661" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-23" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="oDkrbYAr0qEppYFbUsjB-21" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="65" y="2676" as="sourcePoint" />
            <mxPoint x="302" y="2716" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-24" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-21" target="oDkrbYAr0qEppYFbUsjB-22" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="252" y="2766" as="sourcePoint" />
            <mxPoint x="302" y="2716" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-26" target="oDkrbYAr0qEppYFbUsjB-52" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-26" value="查询商品信息" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="373" y="2656.25" width="99" height="39.5" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-29" value="判断是否有库存" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="857" y="2655.75" width="99" height="40" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-35" target="oDkrbYAr0qEppYFbUsjB-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-35" value="下单" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="868" y="2762.5" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="oDkrbYAr0qEppYFbUsjB-37" target="oDkrbYAr0qEppYFbUsjB-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-37" value="扣减库存" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="867" y="2860" width="112" height="48" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-38" value="添加订单信息" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="867" y="2970" width="112" height="48" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-44" value="秒杀优化思路" style="text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;" parent="1" vertex="1">
          <mxGeometry x="54" y="2585" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-49" value="使用redis预存库存使用redis自减操作，保证互斥&lt;div&gt;通过返回值判断是否还要库存&lt;/div&gt;" style="shape=note;size=20;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="829" y="2496" width="183" height="89" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-57" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-52" target="oDkrbYAr0qEppYFbUsjB-56" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-52" value="判断是否在秒杀时间" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="522.5" y="2654.5" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-56" target="oDkrbYAr0qEppYFbUsjB-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-56" value="判断是否下过单" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="682" y="2654.5" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-59" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.35;entryY=-0.035;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-29" target="oDkrbYAr0qEppYFbUsjB-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-60" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.64;entryY=0.066;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;endArrow=none;endFill=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-49" target="oDkrbYAr0qEppYFbUsjB-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-61" value="通过redis自增，key为用户和商品id,判断是否重复下单" style="shape=note;size=20;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="680" y="2748" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.572;entryY=0.008;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;endArrow=none;endFill=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-56" target="oDkrbYAr0qEppYFbUsjB-61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-64" value="使用乐观锁，扣减库存时判断库存大于0" style="shape=note;size=20;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1088" y="2834" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;endArrow=none;endFill=0;dashed=1;" parent="1" source="oDkrbYAr0qEppYFbUsjB-64" target="oDkrbYAr0qEppYFbUsjB-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-66" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;直接使用乐观锁不行，请求太多，抛出异常的耗时比较多&lt;/font&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;但是通过前面的一系列操作减少流量后，使用乐观锁就比较快&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1221" y="2835" width="187" height="99" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-69" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-67" target="oDkrbYAr0qEppYFbUsjB-26" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="447" y="2761" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-67" value="是否有库存" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="302" y="2739" width="105" height="44" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-71" value="使用jvm缓存，线程安全hash，当无库存标识为true直接返回" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="283.5" y="2794" width="142" height="75" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-72" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="827" y="2618" width="205" height="330" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-73" value="添加异常处理，当无库存时，删除前面的下单哈希key,避免多次点击下单时，返回提示信息错误，同时触发次异常时，将无库存标识存入jvm的hash表" style="shape=note;size=20;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1088" y="2606.5" width="155" height="141.5" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-74" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1.006;entryY=0.181;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;endArrow=none;endFill=0;" parent="1" source="oDkrbYAr0qEppYFbUsjB-73" target="oDkrbYAr0qEppYFbUsjB-72" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oDkrbYAr0qEppYFbUsjB-75" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;总结&lt;/h1&gt;&lt;div&gt;使用redis和jvm的数据结构，提供等价的操作，避免查询数据库，提前拦截流量，只允许部分流量进入后续环节&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="444" y="2898" width="216" height="138" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-1" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="63" y="3256" width="30" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-2" value="秒杀服务" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="153" y="3266" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="nXRc7H_uR4GKaCr4ktsL-4" target="nXRc7H_uR4GKaCr4ktsL-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-4" value="登录拦截器" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="263" y="3266" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-5" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="nXRc7H_uR4GKaCr4ktsL-2" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="89" y="3281" as="sourcePoint" />
            <mxPoint x="326" y="3321" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-6" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="nXRc7H_uR4GKaCr4ktsL-2" target="nXRc7H_uR4GKaCr4ktsL-4" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="276" y="3371" as="sourcePoint" />
            <mxPoint x="326" y="3321" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="nXRc7H_uR4GKaCr4ktsL-8" target="nXRc7H_uR4GKaCr4ktsL-16" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="654" y="3292.2844827586205" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-8" value="查询商品信息" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="554" y="3261.25" width="99" height="39.5" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;endArrow=classic;endFill=1;" parent="1" source="nXRc7H_uR4GKaCr4ktsL-9" target="nXRc7H_uR4GKaCr4ktsL-32" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-9" value="判断是否有库存" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1049.5" y="3260.25" width="99" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="nXRc7H_uR4GKaCr4ktsL-13" target="nXRc7H_uR4GKaCr4ktsL-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-13" value="扣减库存" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1379" y="3410" width="112" height="48" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-14" value="添加订单信息" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1379" y="3520" width="112" height="48" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="nXRc7H_uR4GKaCr4ktsL-16" target="nXRc7H_uR4GKaCr4ktsL-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-16" value="判断是否在秒杀时间" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="715" y="3259" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="nXRc7H_uR4GKaCr4ktsL-18" target="nXRc7H_uR4GKaCr4ktsL-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-18" value="判断是否下过单" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="874.5" y="3259" width="110" height="43" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="nXRc7H_uR4GKaCr4ktsL-23" target="nXRc7H_uR4GKaCr4ktsL-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-23" value="库存标识" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="394" y="3259" width="105" height="44" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-26" value="&lt;b&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;引入RocketMq&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="33" y="3113" width="124" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-31" value="rocketMq" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1495" y="3204" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-32" value="rocketMq消息监听" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1375" y="3251" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="nXRc7H_uR4GKaCr4ktsL-32" target="nXRc7H_uR4GKaCr4ktsL-13" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1434" y="3443" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-35" value="发送下单消息" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1199" y="3234" width="88" height="25" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-36" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;websocket&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="488.5" y="3447" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-39" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="nXRc7H_uR4GKaCr4ktsL-36" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="88" y="3322" as="sourcePoint" />
            <mxPoint x="556" y="3322" as="targetPoint" />
            <Array as="points">
              <mxPoint x="88" y="3476" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-40" value="消息监听" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="696.37" y="3447" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-42" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;endFill=0;startArrow=classic;startFill=1;" parent="1" source="nXRc7H_uR4GKaCr4ktsL-40" target="nXRc7H_uR4GKaCr4ktsL-32" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="748" y="3361" as="sourcePoint" />
            <mxPoint x="798" y="3311" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-43" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="nXRc7H_uR4GKaCr4ktsL-40" target="nXRc7H_uR4GKaCr4ktsL-36" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="748" y="3361" as="sourcePoint" />
            <mxPoint x="798" y="3311" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-44" value="订单状态信息" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="984.5" y="3432" width="89" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-45" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;websocket&lt;/h1&gt;&lt;p&gt;异步处理下单操作，处理完成通过websocket给前端消息通知&lt;/p&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="473" y="3553" width="180" height="120" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="nXRc7H_uR4GKaCr4ktsL-9" target="nXRc7H_uR4GKaCr4ktsL-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1076" y="3190" as="sourcePoint" />
            <mxPoint x="112" y="3169.7" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1099" y="3170" />
              <mxPoint x="78" y="3170" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-47" value="返回订单创建中" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="554" y="3124" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-59" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;dashed=1;" parent="1" source="nXRc7H_uR4GKaCr4ktsL-48" target="nXRc7H_uR4GKaCr4ktsL-58" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-48" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="1342.38" y="3237" width="185.25" height="88" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-50" value="下单失败回滚" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1672" y="3251" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-51" value="" style="endArrow=classic;html=1;strokeWidth=2;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;endFill=1;exitX=0.949;exitY=0.027;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="snpFX2cZ34vu5twr3va_-3" target="nXRc7H_uR4GKaCr4ktsL-50" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1529" y="3366" as="sourcePoint" />
            <mxPoint x="1645" y="3311" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-52" value="redis缓存回补&lt;div&gt;下单标识删除&lt;/div&gt;&lt;div&gt;库存标识删除&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1914" y="3250.25" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-53" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="nXRc7H_uR4GKaCr4ktsL-50" target="nXRc7H_uR4GKaCr4ktsL-52" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1595" y="3361" as="sourcePoint" />
            <mxPoint x="1645" y="3311" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-55" value="库存标识删除消息广播监听" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1891.5" y="3083" width="165" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-56" value="" style="endArrow=classic;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;endFill=1;" parent="1" source="nXRc7H_uR4GKaCr4ktsL-52" target="nXRc7H_uR4GKaCr4ktsL-55" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1870" y="3295" as="sourcePoint" />
            <mxPoint x="1920" y="3245" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-57" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;广播消息&lt;/h1&gt;&lt;p&gt;因为库存标识是在jvm缓存中，因此要使用rocketmq广播让所有秒杀服务实例删除&lt;/p&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="2090" y="3059.5" width="220" height="137" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="nXRc7H_uR4GKaCr4ktsL-58" target="nXRc7H_uR4GKaCr4ktsL-61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-58" value="订单超时监听" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1375.01" y="3036" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nXRc7H_uR4GKaCr4ktsL-61" value="修改订单状态为超时取消&lt;div&gt;回补数据库库存&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1584" y="3025" width="187" height="82" as="geometry" />
        </mxCell>
        <mxCell id="snpFX2cZ34vu5twr3va_-1" value="发生异常" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1584" y="3342" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="snpFX2cZ34vu5twr3va_-3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="1309" y="3372" width="231" height="247" as="geometry" />
        </mxCell>
        <mxCell id="nysZMuvI5HXZB0PD42Wc-2" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=0;exitX=0.967;exitY=0.958;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="nXRc7H_uR4GKaCr4ktsL-61" target="nXRc7H_uR4GKaCr4ktsL-52">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1760" y="3218" as="sourcePoint" />
            <mxPoint x="1810" y="3168" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
