# RabbitMQ

![image-20241107131530239](images/image-20241107131530239.png)

![image-20241107131559837](images/image-20241107131559837.png)

![image-20241107131622209](images/image-20241107131622209.png)

![image-20241107131656319](images/image-20241107131656319.png)

## work模型

保证消息按照消费者的处理能力被分配

![image-20241107135031863](images/image-20241107135031863.png)

## fanout交换机

![image-20241107135731923](images/image-20241107135731923.png)

## direct交换机

![image-20241107140302579](images/image-20241107140302579.png)

## topic交换机

![image-20241107140515568](images/image-20241107140515568.png)

## 代码自动生成队列和交换机

### 第一种方式

![image-20241107142116474](images/image-20241107142116474.png)

### 第二种方式

![image-20241107141924129](images/image-20241107141924129.png)

## 消息转换器

可以减小消息占用的空间，防止jdk反序列化的漏洞

![image-20241107143311959](images/image-20241107143311959.png)

## 消息可靠性

### 生产者重连

![image-20241107150431921](images/image-20241107150431921.png)

### 生产者确认

![image-20241107150847338](images/image-20241107150847338.png)

![image-20241107151058346](images/image-20241107151058346.png)

#### 回调函数

![image-20241107152110353](images/image-20241107152110353.png)

![image-20241107151515868](images/image-20241107151515868.png)

### lazy queue

![image-20241107154913540](images/image-20241107154913540.png)

![image-20241107155023479](images/image-20241107155023479.png)

### 消费者确认

![image-20241107155428135](images/image-20241107155428135.png)

![image-20241107155641641](images/image-20241107155641641.png)

### 消费失败重试

![image-20241107160413514](images/image-20241107160413514.png)

![image-20241107160338560](images/image-20241107160338560.png)

![image-20241107160757587](images/image-20241107160757587.png)

## 幂等性

![image-20241107161948302](images/image-20241107161948302.png)

## 延迟消息

### 死信

![image-20241107162639571](images/image-20241107162639571.png)

### 延迟插件

![image-20241107163350613](images/image-20241107163350613.png)